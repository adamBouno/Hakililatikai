{% extends "core/base.html" %}
{% load static %}

{% block title %}Connexion — Rassurez-moi{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/medical-auth.css' %}">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}

{% block content %}
<div class="medical-auth-container">
  <div class="medical-auth-wrapper">
    <!-- Section Formulaire -->
    <div class="medical-form-section">
      <div class="medical-form-container">
        <div class="medical-form-header">
          <div class="brand-container">
            <img src="{% static 'core/images/logo.png' %}" alt="Logo Rassurez-moi" class="medical-logo">
            <div class="brand-text">
              <h1 class="medical-brand-title">Rassurez-moi</h1>
              <p class="medical-brand-subtitle">Assistance médicale intelligente</p>
            </div>
          </div>
        </div>
        
        <form method="post" class="medical-form">
          {% csrf_token %}
          <h2 class="medical-form-title">Connexion à votre compte</h2>
          <p class="medical-form-subtitle">Accédez à tous nos services médicaux en toute sécurité</p>
          
          {% if messages %}
            {% for message in messages %}
              <div class="medical-alert {% if message.tags == 'warning' %}medical-alert-warning{% elif message.tags == 'error' %}medical-alert-danger{% else %}medical-alert-info{% endif %}">
                <i class="fas {% if message.tags == 'warning' %}fa-exclamation-triangle{% elif message.tags == 'error' %}fa-exclamation-circle{% else %}fa-info-circle{% endif %}"></i>
                <span>{{ message }}</span>
              </div>
            {% endfor %}
          {% endif %}
          
          {% if form.errors %}
            <div class="medical-alert medical-alert-danger">
              <i class="fas fa-exclamation-triangle"></i>
              <span>Nom d'utilisateur ou mot de passe incorrect</span>
            </div>
          {% endif %}
          
          <div class="medical-form-group">
            <label for="{{ form.username.id_for_label }}" class="medical-form-label">
              <i class="fas fa-user"></i>
              Nom d'utilisateur ou email
            </label>
            {{ form.username }}
            {% if form.username.errors %}
              <div class="medical-error-message">{{ form.username.errors.0 }}</div>
            {% endif %}
          </div>
          
          <div class="medical-form-group">
            <label for="{{ form.password.id_for_label }}" class="medical-form-label">
              <i class="fas fa-lock"></i>
              Mot de passe
            </label>
            {{ form.password }}
            {% if form.password.errors %}
              <div class="medical-error-message">{{ form.password.errors.0 }}</div>
            {% endif %}
          </div>
          
          <div class="medical-form-group">
            <label class="medical-form-label">
              <input type="checkbox" class="medical-checkbox" name="remember_me" id="remember_me">
              <span style="margin-left: 8px; font-weight: 500; color: var(--medical-gray-600);">
                Se souvenir de moi
              </span>
            </label>
          </div>
          
          <button type="submit" class="medical-btn">
            <i class="fas fa-sign-in-alt"></i>
            Se connecter
          </button>
          
          <div class="medical-form-footer">
            <p class="medical-form-footer-text">
              Pas encore de compte ? 
              <a href="{% url 'signup' %}" class="medical-form-link">Créer un compte gratuit</a>
            </p>
            <p class="medical-form-footer-text" style="margin-top: 8px;">
              <a href="#" class="medical-form-link">Mot de passe oublié ?</a>
            </p>
          </div>
        </form>
      </div>
    </div>
    
    <!-- Section Informations -->
    <div class="medical-info-section">
      <div class="medical-info-content">
        <div class="medical-welcome-header">
          <h1 class="medical-welcome-title">Bienvenue sur Rassurez-moi</h1>
          <p class="medical-welcome-subtitle">Votre assistant médical personnel</p>
        </div>
        
        <div class="medical-features-list">
          <div class="medical-feature-item">
            <div class="medical-feature-icon">
              <i class="fas fa-microphone-alt"></i>
            </div>
            <div class="medical-feature-content">
              <h3>Diagnostic vocal</h3>
              <p>Décrivez vos symptômes en bambara et recevez des conseils médicaux personnalisés</p>
            </div>
          </div>
          
          <div class="medical-feature-item">
            <div class="medical-feature-icon">
              <i class="fas fa-hospital"></i>
            </div>
            <div class="medical-feature-content">
              <h3>Centres de santé</h3>
              <p>Trouvez les centres médicaux les plus proches avec géolocalisation précise</p>
            </div>
          </div>
          
          <div class="medical-feature-item">
            <div class="medical-feature-icon">
              <i class="fas fa-bell"></i>
            </div>
            <div class="medical-feature-content">
              <h3>Rappels médicaux</h3>
              <p>Ne manquez plus vos prises de médicaments avec nos rappels personnalisés</p>
            </div>
          </div>
          
          <div class="medical-feature-item">
            <div class="medical-feature-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="medical-feature-content">
              <h3>Confidentialité garantie</h3>
              <p>Vos données médicales sont protégées et sécurisées selon les standards internationaux</p>
            </div>
          </div>
        </div>
        
        <div class="medical-stats-preview">
          <div class="medical-stat-preview-item">
            <div class="medical-stat-number">1000+</div>
            <div class="medical-stat-label">Utilisateurs satisfaits</div>
          </div>
          <div class="medical-stat-preview-item">
            <div class="medical-stat-number">24/7</div>
            <div class="medical-stat-label">Disponibilité</div>
          </div>
          <div class="medical-stat-preview-item">
            <div class="medical-stat-number">95%</div>
            <div class="medical-stat-label">Satisfaction</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Animation d'entrée pour les éléments
document.addEventListener('DOMContentLoaded', function() {
  const formElements = document.querySelectorAll('.medical-form-group, .medical-btn, .medical-form-footer');
  const featureItems = document.querySelectorAll('.medical-feature-item');
  
  // Animation des éléments du formulaire
  formElements.forEach((element, index) => {
    element.style.opacity = '0';
    element.style.transform = 'translateY(20px)';
    setTimeout(() => {
      element.style.transition = 'all 0.6s ease';
      element.style.opacity = '1';
      element.style.transform = 'translateY(0)';
    }, 200 + (index * 100));
  });
  
  // Animation des fonctionnalités
  featureItems.forEach((item, index) => {
    item.style.opacity = '0';
    item.style.transform = 'translateX(-20px)';
    setTimeout(() => {
      item.style.transition = 'all 0.6s ease';
      item.style.opacity = '1';
      item.style.transform = 'translateX(0)';
    }, 500 + (index * 150));
  });
  
  // Effet de focus amélioré pour les inputs
  const inputs = document.querySelectorAll('.medical-input');
  inputs.forEach(input => {
    input.addEventListener('focus', function() {
      this.parentElement.style.transform = 'scale(1.02)';
    });
    
    input.addEventListener('blur', function() {
      this.parentElement.style.transform = 'scale(1)';
    });
  });
  
  // Validation en temps réel
  const form = document.querySelector('.medical-form');
  const submitBtn = document.querySelector('.medical-btn');
  
  form.addEventListener('input', function() {
    const username = form.querySelector('input[name="username"]').value;
    const password = form.querySelector('input[name="password"]').value;
    
    if (username && password) {
      submitBtn.style.opacity = '1';
      submitBtn.style.transform = 'translateY(0)';
    } else {
      submitBtn.style.opacity = '0.7';
      submitBtn.style.transform = 'translateY(2px)';
    }
  });
});
</script>
{% endblock %}
